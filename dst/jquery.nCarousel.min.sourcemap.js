/*!
  
  jquery.nCarousel.js
  
  Version: 0.1.0
  Author: Nunifuchisaka(nunifuchisaka@gmail.com)
  Website: http://nunifuchisaka.com/w/n-carousel/demo
  Repository: https://github.com/Nunifuchisaka/nCarousel
  
*/
!function(t,i,s,e){"use strict";function r(s){var e=this;this.opts=t.extend({duration:400,easing:"swing",surplus:1,interval:0},s),this.backup={},this.lock=!1,this.activeResponsive=!1,this.$window=t(i),this.$el=t(s.el),this.backup.html=this.$el.html(),this.$el.empty(),this.$parent=this.$el.parent(),this.$el.on("click",".nCarousel__prev",function(){return e.animation(e.current-1),!1}).on("click",".nCarousel__next",function(){return e.animation(e.current+1),!1}),this.maxWidth=parseInt(this.$el.css("max-width")),this.init(),this.windowResize(),this.resizeTimer=!1,this.$window.resize(function(){e.resizeTimer!==!1&&clearTimeout(e.resizeTimer),e.resizeTimer=setTimeout(t.proxy(e.windowResize,e),100)}),0<this.opts.interval&&(this.ticker=setInterval(function(){e.animation(e.current+1)},this.opts.interval))}t.fn.nCarousel=function(i){return this.each(function(s,e){i=t.extend({i:s,el:e},i),new r(i)})},r.prototype.windowResize=function(){if(this.windowWidth=this.$window.width(),this.maxWidth<this.$window.width())return void(this.activeResponsive&&(console.log("レスポンシブを解除"),this.activeResponsive=!1,this.resetItemWidth("auto")));this.activeResponsive=!0,console.log("レスポンシブを適用"),this.resetItemWidth(this.$parent.width())},r.prototype.resetItemWidth=function(t){this.$_item.width(t),this.itemWidth=this.$item.outerWidth(!0),this.itemsWidth=this.itemWidth*this.$item.length,this.$items.css({marginLeft:-1*this.opts.surplus*this.itemWidth*this.current+this.marginCorrect,width:(2*this.opts.surplus+1)*this.itemsWidth})},r.prototype.init=function(){var t=this;this.$el.addClass("nCarousel"),this.$el.html('<div class="nCarousel__viewport"><div class="nCarousel__items">'+this.backup.html+"</div></div>"),this.$viewport=this.$el.children(".nCarousel__viewport"),this.$items=this.$viewport.children(".nCarousel__items"),this.$item=this.$items.children(),this.$item.addClass("nCarousel__item"),this.itemWidth=this.$item.outerWidth(!0),this.itemsWidth=this.itemWidth*this.$item.length,this.marginCorrect=-1*parseInt(this.$item.css("margin-left")),this.$items.css({marginLeft:-1*this.opts.surplus*this.itemsWidth+this.marginCorrect,width:(2*this.opts.surplus+1)*this.itemsWidth});for(var i=0;i<2*this.opts.surplus;i++)this.$items.append(this.$item.clone());this.$_item=this.$items.children(),this.current=this.$item.length*this.opts.surplus,this.$viewport.append('<div class="nCarousel__arrow nCarousel__prev"></div><div class="nCarousel__arrow nCarousel__next"></div>'),this.$prev=this.$viewport.children(".nCarousel__prev"),this.$next=this.$viewport.children(".nCarousel__next"),this.arrowVisibilities();for(var s='<div class="nCarousel__pointers">',i=0;i<this.$item.length;i++)s+='<div class="nCarousel__pointer"></div>';s+="</div>",this.$el.append(s),this.$pointer=this.$el.find(".nCarousel__pointer"),this.$pointer.eq(0).addClass("is-active"),this.$el.on("click",".nCarousel__pointer",function(i){var s=t.$pointer.index(this),e=s+t.$item.length*t.opts.surplus;return t.animation(e),!1})},r.prototype.animation=function(t){var i=this;return this.lock?!1:0===this.opts.surplus&&(0>t||this.$item.length-1<t)?!1:(this.lock=!0,this.current=t,i.current<i.$item.length*i.opts.surplus?i.current+=i.$item.length:i.current>=i.$item.length*(i.opts.surplus+1)&&(i.current-=i.$item.length),i.pointerActive(),this.$items.stop(!0,!1).animate({marginLeft:i.itemWidth*t*-1+this.marginCorrect},this.opts.duration,this.opts.easing,function(){i.$items.css("marginLeft",i.itemWidth*i.current*-1+i.marginCorrect),i.lock=!1}),void this.arrowVisibilities())},r.prototype.arrowVisibilities=function(){0===this.opts.surplus&&(0==this.current?this.$prev.css("display","none"):this.$prev.css("display","block"),this.current==this.$item.length-1?this.$next.css("display","none"):this.$next.css("display","block"))},r.prototype.pointerActive=function(){this.$pointer.filter(".is-active").removeClass("is-active"),this.$pointer.eq(this.current-this.$item.length*this.opts.surplus).addClass("is-active")}}(jQuery,this,this.document);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjExMF9oZWFkZXIuanMiLCI0MTBfVmlldy5qcyIsIjk5MF9mb290ZXIuanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsImRvY3VtZW50IiwidW5kZWZpbmVkIiwibkNhcm91c2VsIiwib3B0cyIsInNlbGYiLCJ0aGlzIiwiZXh0ZW5kIiwiZHVyYXRpb24iLCJlYXNpbmciLCJzdXJwbHVzIiwiaW50ZXJ2YWwiLCJiYWNrdXAiLCJsb2NrIiwiYWN0aXZlUmVzcG9uc2l2ZSIsIiR3aW5kb3ciLCIkZWwiLCJlbCIsImh0bWwiLCJlbXB0eSIsIiRwYXJlbnQiLCJwYXJlbnQiLCJvbiIsImFuaW1hdGlvbiIsImN1cnJlbnQiLCJtYXhXaWR0aCIsInBhcnNlSW50IiwiY3NzIiwiaW5pdCIsIndpbmRvd1Jlc2l6ZSIsInJlc2l6ZVRpbWVyIiwicmVzaXplIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsInByb3h5IiwidGlja2VyIiwic2V0SW50ZXJ2YWwiLCJmbiIsImVhY2giLCJpIiwicHJvdG90eXBlIiwid2luZG93V2lkdGgiLCJ3aWR0aCIsImNvbnNvbGUiLCJsb2ciLCJyZXNldEl0ZW1XaWR0aCIsIiRfaXRlbSIsIml0ZW1XaWR0aCIsIiRpdGVtIiwib3V0ZXJXaWR0aCIsIml0ZW1zV2lkdGgiLCJsZW5ndGgiLCIkaXRlbXMiLCJtYXJnaW5MZWZ0IiwibWFyZ2luQ29ycmVjdCIsImFkZENsYXNzIiwiJHZpZXdwb3J0IiwiY2hpbGRyZW4iLCJhcHBlbmQiLCJjbG9uZSIsIiRwcmV2IiwiJG5leHQiLCJhcnJvd1Zpc2liaWxpdGllcyIsInBvaW50ZXJzSFRNTCIsIiRwb2ludGVyIiwiZmluZCIsImVxIiwiZSIsImluZGV4IiwibmV4dCIsInBvaW50ZXJBY3RpdmUiLCJzdG9wIiwiYW5pbWF0ZSIsImZpbHRlciIsInJlbW92ZUNsYXNzIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0NBVUEsU0FBQUEsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQSxZ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QUFBTCIsImZpbGUiOiJqcXVlcnkubkNhcm91c2VsLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICBcbiAganF1ZXJ5Lm5DYXJvdXNlbC5qc1xuICBcbiAgVmVyc2lvbjogMC4xLjBcbiAgQXV0aG9yOiBOdW5pZnVjaGlzYWthKG51bmlmdWNoaXNha2FAZ21haWwuY29tKVxuICBXZWJzaXRlOiBodHRwOi8vbnVuaWZ1Y2hpc2FrYS5jb20vdy9uLWNhcm91c2VsL2RlbW9cbiAgUmVwb3NpdG9yeTogaHR0cHM6Ly9naXRodWIuY29tL051bmlmdWNoaXNha2EvbkNhcm91c2VsXG4gIFxuKi9cbjsoZnVuY3Rpb24oJCwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkKXtcbid1c2Ugc3RyaWN0JztcbiIsIi8vXG4kLmZuLm5DYXJvdXNlbCA9IGZ1bmN0aW9uKCBvcHRzICl7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgXG4gIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGksIGVsICl7XG4gICAgb3B0cyA9ICQuZXh0ZW5kKHtcbiAgICAgIGk6IGksXG4gICAgICBlbDogZWxcbiAgICB9LCBvcHRzKTtcbiAgICBuZXcgbkNhcm91c2VsKG9wdHMpO1xuICB9KTtcbn1cblxuXG5cbi8qXG4jIyBuQ2Fyb3VzZWxcbiovXG5cbmZ1bmN0aW9uIG5DYXJvdXNlbCggb3B0cyApIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB0aGlzLm9wdHMgPSAkLmV4dGVuZCh7XG4gICAgZHVyYXRpb246IDQwMCxcbiAgICBlYXNpbmc6ICdzd2luZycsXG4gICAgc3VycGx1czogMSxcbiAgICBpbnRlcnZhbDogMFxuICB9LCBvcHRzKTtcbiAgXG4gIHRoaXMuYmFja3VwID0ge307XG4gIHRoaXMubG9jayA9IGZhbHNlO1xuICB0aGlzLmFjdGl2ZVJlc3BvbnNpdmUgPSBmYWxzZTtcbiAgXG4gIHRoaXMuJHdpbmRvdyA9ICQod2luZG93KTtcbiAgdGhpcy4kZWwgPSAkKG9wdHMuZWwpO1xuICB0aGlzLmJhY2t1cC5odG1sID0gdGhpcy4kZWwuaHRtbCgpO1xuICB0aGlzLiRlbC5lbXB0eSgpO1xuICBcbiAgdGhpcy4kcGFyZW50ID0gdGhpcy4kZWwucGFyZW50KCk7XG4gIFxuICB0aGlzLiRlbFxuICAgIC5vbignY2xpY2snLCAnLm5DYXJvdXNlbF9fcHJldicsIGZ1bmN0aW9uKCl7XG4gICAgICBzZWxmLmFuaW1hdGlvbiggc2VsZi5jdXJyZW50IC0gMSApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pXG4gICAgLm9uKCdjbGljaycsICcubkNhcm91c2VsX19uZXh0JywgZnVuY3Rpb24oKXtcbiAgICAgIHNlbGYuYW5pbWF0aW9uKCBzZWxmLmN1cnJlbnQgKyAxICk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gIFxuICB0aGlzLm1heFdpZHRoID0gcGFyc2VJbnQoIHRoaXMuJGVsLmNzcygnbWF4LXdpZHRoJykgKTtcbiAgLy9jb25zb2xlLmxvZygnbWF4V2lkdGgnLCB0aGlzLm1heFdpZHRoKTtcbiAgXG4gIHRoaXMuaW5pdCgpO1xuICBcbiAgLy9yZXNpemVcbiAgdGhpcy53aW5kb3dSZXNpemUoKTtcbiAgdGhpcy5yZXNpemVUaW1lciA9IGZhbHNlO1xuICB0aGlzLiR3aW5kb3cucmVzaXplKGZ1bmN0aW9uKCl7XG4gICAgaWYoIHNlbGYucmVzaXplVGltZXIgIT09IGZhbHNlICkge1xuICAgICAgY2xlYXJUaW1lb3V0KHNlbGYucmVzaXplVGltZXIpO1xuICAgIH1cbiAgICBzZWxmLnJlc2l6ZVRpbWVyID0gc2V0VGltZW91dCgkLnByb3h5KHNlbGYud2luZG93UmVzaXplLCBzZWxmKSwgMTAwKTtcbiAgfSk7XG4gIFxuICAvL2F1dG9wbGF5XG4gIGlmKCAwIDwgdGhpcy5vcHRzLmludGVydmFsICkge1xuICAgIHRoaXMudGlja2VyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtcbiAgICAgIHNlbGYuYW5pbWF0aW9uKCBzZWxmLmN1cnJlbnQgKyAxICk7XG4gICAgfSwgdGhpcy5vcHRzLmludGVydmFsKTtcbiAgfVxufVxuXG5cblxuLypcbiMjIyB3aW5kb3cgcmVzaXplXG4qL1xuXG5uQ2Fyb3VzZWwucHJvdG90eXBlLndpbmRvd1Jlc2l6ZSA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMud2luZG93V2lkdGggPSB0aGlzLiR3aW5kb3cud2lkdGgoKTtcbiAgaWYoIHRoaXMubWF4V2lkdGggPCB0aGlzLiR3aW5kb3cud2lkdGgoKSApe1xuICAgIGlmKCB0aGlzLmFjdGl2ZVJlc3BvbnNpdmUgKSB7XG4gICAgICBjb25zb2xlLmxvZygn44Os44K544Od44Oz44K344OW44KS6Kej6ZmkJyk7XG4gICAgICB0aGlzLmFjdGl2ZVJlc3BvbnNpdmUgPSBmYWxzZTtcbiAgICAgIHRoaXMucmVzZXRJdGVtV2lkdGgoJ2F1dG8nKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5hY3RpdmVSZXNwb25zaXZlID0gdHJ1ZTtcbiAgY29uc29sZS5sb2coJ+ODrOOCueODneODs+OCt+ODluOCkumBqeeUqCcpO1xuICB0aGlzLnJlc2V0SXRlbVdpZHRoKCB0aGlzLiRwYXJlbnQud2lkdGgoKSApO1xufVxuXG5cblxuLypcbiMjIyByZXNldEl0ZW1XaWR0aFxuKi9cblxubkNhcm91c2VsLnByb3RvdHlwZS5yZXNldEl0ZW1XaWR0aCA9IGZ1bmN0aW9uKCB3aWR0aCApe1xuICB0aGlzLiRfaXRlbS53aWR0aCh3aWR0aCk7XG4gIHRoaXMuaXRlbVdpZHRoID0gdGhpcy4kaXRlbS5vdXRlcldpZHRoKHRydWUpO1xuICB0aGlzLml0ZW1zV2lkdGggPSB0aGlzLml0ZW1XaWR0aCAqIHRoaXMuJGl0ZW0ubGVuZ3RoO1xuICBcbiAgdGhpcy4kaXRlbXNcbiAgICAuY3NzKHtcbiAgICAgIG1hcmdpbkxlZnQ6ICh0aGlzLm9wdHMuc3VycGx1cyAqIC0xICogdGhpcy5pdGVtV2lkdGggKiB0aGlzLmN1cnJlbnQpICsgdGhpcy5tYXJnaW5Db3JyZWN0LFxuICAgICAgd2lkdGg6ICh0aGlzLm9wdHMuc3VycGx1cyAqIDIgKyAxKSAqIHRoaXMuaXRlbXNXaWR0aFxuICAgIH0pO1xufVxuXG5cblxuLypcbiMjIyBpbml0XG4qL1xuXG5uQ2Fyb3VzZWwucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpe1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHRoaXMuJGVsLmFkZENsYXNzKCduQ2Fyb3VzZWwnKTtcbiAgdGhpcy4kZWwuaHRtbChcbiAgICAnPGRpdiBjbGFzcz1cIm5DYXJvdXNlbF9fdmlld3BvcnRcIj4nXG4gICAgKyAnPGRpdiBjbGFzcz1cIm5DYXJvdXNlbF9faXRlbXNcIj4nXG4gICAgKyB0aGlzLmJhY2t1cC5odG1sXG4gICAgKyAnPC9kaXY+J1xuICAgICsgJzwvZGl2PidcbiAgKTtcbiAgXG4gIHRoaXMuJHZpZXdwb3J0ID0gdGhpcy4kZWwuY2hpbGRyZW4oJy5uQ2Fyb3VzZWxfX3ZpZXdwb3J0Jyk7XG4gIHRoaXMuJGl0ZW1zID0gdGhpcy4kdmlld3BvcnQuY2hpbGRyZW4oJy5uQ2Fyb3VzZWxfX2l0ZW1zJyk7XG4gIHRoaXMuJGl0ZW0gPSB0aGlzLiRpdGVtcy5jaGlsZHJlbigpO1xuICB0aGlzLiRpdGVtLmFkZENsYXNzKCduQ2Fyb3VzZWxfX2l0ZW0nKTtcbiAgXG4gIHRoaXMuaXRlbVdpZHRoID0gdGhpcy4kaXRlbS5vdXRlcldpZHRoKHRydWUpO1xuICB0aGlzLml0ZW1zV2lkdGggPSB0aGlzLml0ZW1XaWR0aCAqIHRoaXMuJGl0ZW0ubGVuZ3RoO1xuICBcbiAgdGhpcy5tYXJnaW5Db3JyZWN0ID0gcGFyc2VJbnQoIHRoaXMuJGl0ZW0uY3NzKCdtYXJnaW4tbGVmdCcpICkgKiAtMTtcbiAgXG4gIHRoaXMuJGl0ZW1zXG4gICAgLmNzcyh7XG4gICAgICBtYXJnaW5MZWZ0OiAodGhpcy5vcHRzLnN1cnBsdXMgKiAtMSAqIHRoaXMuaXRlbXNXaWR0aCkgKyB0aGlzLm1hcmdpbkNvcnJlY3QsXG4gICAgICB3aWR0aDogKHRoaXMub3B0cy5zdXJwbHVzICogMiArIDEpICogdGhpcy5pdGVtc1dpZHRoXG4gICAgfSk7XG4gIFxuICBmb3IoIHZhciBpPTA7IGkgPCB0aGlzLm9wdHMuc3VycGx1cyAqIDI7IGkrKyApe1xuICAgIHRoaXMuJGl0ZW1zLmFwcGVuZCggdGhpcy4kaXRlbS5jbG9uZSgpICk7XG4gIH1cbiAgdGhpcy4kX2l0ZW0gPSB0aGlzLiRpdGVtcy5jaGlsZHJlbigpO1xuICBcbiAgdGhpcy5jdXJyZW50ID0gdGhpcy4kaXRlbS5sZW5ndGggKiB0aGlzLm9wdHMuc3VycGx1cztcbiAgXG4gIC8vYXJyb3dzXG4gIHRoaXMuJHZpZXdwb3J0LmFwcGVuZChcbiAgICAnPGRpdiBjbGFzcz1cIm5DYXJvdXNlbF9fYXJyb3cgbkNhcm91c2VsX19wcmV2XCI+PC9kaXY+JyArIFxuICAgICc8ZGl2IGNsYXNzPVwibkNhcm91c2VsX19hcnJvdyBuQ2Fyb3VzZWxfX25leHRcIj48L2Rpdj4nXG4gICk7XG4gIHRoaXMuJHByZXYgPSB0aGlzLiR2aWV3cG9ydC5jaGlsZHJlbignLm5DYXJvdXNlbF9fcHJldicpO1xuICB0aGlzLiRuZXh0ID0gdGhpcy4kdmlld3BvcnQuY2hpbGRyZW4oJy5uQ2Fyb3VzZWxfX25leHQnKTtcbiAgdGhpcy5hcnJvd1Zpc2liaWxpdGllcygpO1xuICBcbiAgLy9hZGQgcG9pbnRlcnNcbiAgdmFyIHBvaW50ZXJzSFRNTCA9ICc8ZGl2IGNsYXNzPVwibkNhcm91c2VsX19wb2ludGVyc1wiPic7XG4gIGZvciggdmFyIGk9MDsgaTx0aGlzLiRpdGVtLmxlbmd0aDsgaSsrICl7XG4gICAgcG9pbnRlcnNIVE1MICs9ICc8ZGl2IGNsYXNzPVwibkNhcm91c2VsX19wb2ludGVyXCI+PC9kaXY+J1xuICB9XG4gIHBvaW50ZXJzSFRNTCArPSAnPC9kaXY+JztcbiAgXG4gIHRoaXMuJGVsLmFwcGVuZChwb2ludGVyc0hUTUwpO1xuICB0aGlzLiRwb2ludGVyID0gdGhpcy4kZWwuZmluZCgnLm5DYXJvdXNlbF9fcG9pbnRlcicpO1xuICB0aGlzLiRwb2ludGVyLmVxKDApLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcbiAgdGhpcy4kZWwub24oJ2NsaWNrJywgJy5uQ2Fyb3VzZWxfX3BvaW50ZXInLCBmdW5jdGlvbihlKXtcbiAgICB2YXIgaW5kZXggPSBzZWxmLiRwb2ludGVyLmluZGV4KHRoaXMpLFxuICAgICAgICBuZXh0ICA9IGluZGV4ICsgc2VsZi4kaXRlbS5sZW5ndGggKiBzZWxmLm9wdHMuc3VycGx1cztcbiAgICBzZWxmLmFuaW1hdGlvbiggbmV4dCApO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSk7XG59XG5cblxuXG4vKlxuIyMjIGFuaW1hdGlvblxuKi9cblxubkNhcm91c2VsLnByb3RvdHlwZS5hbmltYXRpb24gPSBmdW5jdGlvbiggbmV4dCApe1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIGlmKCB0aGlzLmxvY2sgKSByZXR1cm4gZmFsc2U7XG4gIGlmKCAwID09PSB0aGlzLm9wdHMuc3VycGx1cyApIHtcbiAgICBpZiggbmV4dCA8IDAgfHwgdGhpcy4kaXRlbS5sZW5ndGggLSAxIDwgbmV4dCApIHJldHVybiBmYWxzZTtcbiAgfVxuICBcbiAgdGhpcy5sb2NrID0gdHJ1ZTtcbiAgdGhpcy5jdXJyZW50ID0gbmV4dDtcbiAgaWYoIHNlbGYuY3VycmVudCA8IHNlbGYuJGl0ZW0ubGVuZ3RoICogc2VsZi5vcHRzLnN1cnBsdXMgKSB7XG4gICAgc2VsZi5jdXJyZW50ICs9IHNlbGYuJGl0ZW0ubGVuZ3RoO1xuICB9IGVsc2UgaWYoIHNlbGYuY3VycmVudCA+PSBzZWxmLiRpdGVtLmxlbmd0aCAqIChzZWxmLm9wdHMuc3VycGx1cyArIDEpICkge1xuICAgIHNlbGYuY3VycmVudCAtPSBzZWxmLiRpdGVtLmxlbmd0aDtcbiAgfVxuICBcbiAgc2VsZi5wb2ludGVyQWN0aXZlKCk7XG4gIFxuICB0aGlzLiRpdGVtcy5zdG9wKHRydWUsZmFsc2UpLmFuaW1hdGUoe1xuICAgICdtYXJnaW5MZWZ0Jzogc2VsZi5pdGVtV2lkdGggKiBuZXh0ICogLTEgKyB0aGlzLm1hcmdpbkNvcnJlY3RcbiAgfSwgdGhpcy5vcHRzLmR1cmF0aW9uLCB0aGlzLm9wdHMuZWFzaW5nLCBmdW5jdGlvbigpe1xuICAgIHNlbGYuJGl0ZW1zLmNzcygnbWFyZ2luTGVmdCcsIHNlbGYuaXRlbVdpZHRoICogc2VsZi5jdXJyZW50ICogLTEgKyBzZWxmLm1hcmdpbkNvcnJlY3QpO1xuICAgIHNlbGYubG9jayA9IGZhbHNlO1xuICB9KTtcbiAgXG4gIHRoaXMuYXJyb3dWaXNpYmlsaXRpZXMoKTtcbn1cblxuXG5cbi8qXG4jIyMgYXJyb3cgdmlzaWJpbGl0aWVzXG4qL1xuXG5uQ2Fyb3VzZWwucHJvdG90eXBlLmFycm93VmlzaWJpbGl0aWVzID0gZnVuY3Rpb24oKXtcbiAgaWYoIDAgPT09IHRoaXMub3B0cy5zdXJwbHVzICkge1xuICAgIGlmKCAwID09IHRoaXMuY3VycmVudCApIHtcbiAgICAgIHRoaXMuJHByZXYuY3NzKCdkaXNwbGF5Jywnbm9uZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRwcmV2LmNzcygnZGlzcGxheScsJ2Jsb2NrJyk7XG4gICAgfVxuICAgIGlmKCB0aGlzLmN1cnJlbnQgPT0gdGhpcy4kaXRlbS5sZW5ndGggLSAxICkge1xuICAgICAgdGhpcy4kbmV4dC5jc3MoJ2Rpc3BsYXknLCdub25lJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJG5leHQuY3NzKCdkaXNwbGF5JywnYmxvY2snKTtcbiAgICB9XG4gIH1cbn1cblxuXG5cbi8qXG4jIyMgcG9pbnRlciBhY3RpdmVcbiovXG5cbm5DYXJvdXNlbC5wcm90b3R5cGUucG9pbnRlckFjdGl2ZSA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuJHBvaW50ZXIuZmlsdGVyKCcuaXMtYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICB0aGlzLiRwb2ludGVyLmVxKHRoaXMuY3VycmVudCAtIHRoaXMuJGl0ZW0ubGVuZ3RoICogdGhpcy5vcHRzLnN1cnBsdXMpLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcbn1cbiIsIn0pKGpRdWVyeSwgdGhpcywgdGhpcy5kb2N1bWVudCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
