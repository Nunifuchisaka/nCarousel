!function(t,i,s,e){"use strict";function r(s){var e=this;this.opts=t.extend({duration:400,easing:"swing",surplus:1,interval:0},s),this.backup={},this.lock=!1,this.activeResponsive=!1,this.$window=t(i),this.$el=t(s.el),this.backup.html=this.$el.html(),this.$el.empty(),this.$parent=this.$el.parent(),this.$el.on("click",".nCarousel__prev",function(){return e.animation(e.current-1),!1}).on("click",".nCarousel__next",function(){return e.animation(e.current+1),!1}),this.maxWidth=parseInt(this.$el.css("max-width")),this.init(),this.windowResize(),this.resizeTimer=!1,this.$window.resize(function(){e.resizeTimer!==!1&&clearTimeout(e.resizeTimer),e.resizeTimer=setTimeout(t.proxy(e.windowResize,e),100)}),0<this.opts.interval&&(this.ticker=setInterval(function(){e.animation(e.current+1)},this.opts.interval))}t.fn.nCarousel=function(i){return this.each(function(s,e){i=t.extend({i:s,el:e},i),new r(i)})},r.prototype.windowResize=function(){if(this.windowWidth=this.$window.width(),this.maxWidth<this.$window.width())return void(this.activeResponsive&&(console.log("レスポンシブを解除"),this.activeResponsive=!1,this.resetItemWidth("auto")));this.activeResponsive=!0,console.log("レスポンシブを適用"),this.resetItemWidth(this.$parent.width())},r.prototype.resetItemWidth=function(t){this.$_item.width(t),this.itemWidth=this.$item.outerWidth(!0),this.itemsWidth=this.itemWidth*this.$item.length,this.$items.css({marginLeft:-1*this.opts.surplus*this.itemWidth*this.current+this.marginCorrect,width:(2*this.opts.surplus+1)*this.itemsWidth})},r.prototype.init=function(){var t=this;this.$el.addClass("nCarousel"),this.$el.html('<div class="nCarousel__viewport"><div class="nCarousel__items">'+this.backup.html+"</div></div>"),this.$viewport=this.$el.children(".nCarousel__viewport"),this.$items=this.$viewport.children(".nCarousel__items"),this.$item=this.$items.children(),this.$item.addClass("nCarousel__item"),this.itemWidth=this.$item.outerWidth(!0),this.itemsWidth=this.itemWidth*this.$item.length,this.marginCorrect=-1*parseInt(this.$item.css("margin-left")),this.$items.css({marginLeft:-1*this.opts.surplus*this.itemsWidth+this.marginCorrect,width:(2*this.opts.surplus+1)*this.itemsWidth});for(var i=0;i<2*this.opts.surplus;i++)this.$items.append(this.$item.clone());this.$_item=this.$items.children(),this.current=this.$item.length*this.opts.surplus,this.$viewport.append('<div class="nCarousel__arrow nCarousel__prev"></div><div class="nCarousel__arrow nCarousel__next"></div>'),this.$prev=this.$viewport.children(".nCarousel__prev"),this.$next=this.$viewport.children(".nCarousel__next"),this.arrowVisibilities();for(var s='<div class="nCarousel__pointers">',i=0;i<this.$item.length;i++)s+='<div class="nCarousel__pointer"></div>';s+="</div>",this.$el.append(s),this.$pointer=this.$el.find(".nCarousel__pointer"),this.$pointer.eq(0).addClass("is-active"),this.$el.on("click",".nCarousel__pointer",function(i){var s=t.$pointer.index(this),e=s+t.$item.length*t.opts.surplus;return t.animation(e),!1})},r.prototype.animation=function(t){var i=this;return this.lock?!1:0===this.opts.surplus&&(0>t||this.$item.length-1<t)?!1:(this.lock=!0,this.current=t,i.current<i.$item.length*i.opts.surplus?i.current+=i.$item.length:i.current>=i.$item.length*(i.opts.surplus+1)&&(i.current-=i.$item.length),i.pointerActive(),this.$items.stop(!0,!1).animate({marginLeft:i.itemWidth*t*-1+this.marginCorrect},this.opts.duration,this.opts.easing,function(){i.$items.css("marginLeft",i.itemWidth*i.current*-1+i.marginCorrect),i.lock=!1}),void this.arrowVisibilities())},r.prototype.arrowVisibilities=function(){0===this.opts.surplus&&(0==this.current?this.$prev.css("display","none"):this.$prev.css("display","block"),this.current==this.$item.length-1?this.$next.css("display","none"):this.$next.css("display","block"))},r.prototype.pointerActive=function(){this.$pointer.filter(".is-active").removeClass("is-active"),this.$pointer.eq(this.current-this.$item.length*this.opts.surplus).addClass("is-active")}}(jQuery,this,this.document);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjExMF9oZWFkZXIuanMiLCI0MTBfVmlldy5qcyIsIjk5MF9mb290ZXIuanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsImRvY3VtZW50IiwidW5kZWZpbmVkIiwibkNhcm91c2VsIiwib3B0cyIsInNlbGYiLCJ0aGlzIiwiZXh0ZW5kIiwiZHVyYXRpb24iLCJlYXNpbmciLCJzdXJwbHVzIiwiaW50ZXJ2YWwiLCJiYWNrdXAiLCJsb2NrIiwiYWN0aXZlUmVzcG9uc2l2ZSIsIiR3aW5kb3ciLCIkZWwiLCJlbCIsImh0bWwiLCJlbXB0eSIsIiRwYXJlbnQiLCJwYXJlbnQiLCJvbiIsImFuaW1hdGlvbiIsImN1cnJlbnQiLCJtYXhXaWR0aCIsInBhcnNlSW50IiwiY3NzIiwiaW5pdCIsIndpbmRvd1Jlc2l6ZSIsInJlc2l6ZVRpbWVyIiwicmVzaXplIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsInByb3h5IiwidGlja2VyIiwic2V0SW50ZXJ2YWwiLCJmbiIsImVhY2giLCJpIiwicHJvdG90eXBlIiwid2luZG93V2lkdGgiLCJ3aWR0aCIsImNvbnNvbGUiLCJsb2ciLCJyZXNldEl0ZW1XaWR0aCIsIiRfaXRlbSIsIml0ZW1XaWR0aCIsIiRpdGVtIiwib3V0ZXJXaWR0aCIsIml0ZW1zV2lkdGgiLCJsZW5ndGgiLCIkaXRlbXMiLCJtYXJnaW5MZWZ0IiwibWFyZ2luQ29ycmVjdCIsImFkZENsYXNzIiwiJHZpZXdwb3J0IiwiY2hpbGRyZW4iLCJhcHBlbmQiLCJjbG9uZSIsIiRwcmV2IiwiJG5leHQiLCJhcnJvd1Zpc2liaWxpdGllcyIsInBvaW50ZXJzSFRNTCIsIiRwb2ludGVyIiwiZmluZCIsImVxIiwiZSIsImluZGV4IiwibmV4dCIsInBvaW50ZXJBY3RpdmUiLCJzdG9wIiwiYW5pbWF0ZSIsImZpbHRlciIsInJlbW92ZUNsYXNzIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBLFlDa0JBLFNBQUFD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bGUiOiJuQ2Fyb3VzZWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyI7KGZ1bmN0aW9uKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCl7XG4ndXNlIHN0cmljdCc7XG4iLCIvL1xuJC5mbi5uQ2Fyb3VzZWwgPSBmdW5jdGlvbiggb3B0cyApe1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIFxuICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCBpLCBlbCApe1xuICAgIG9wdHMgPSAkLmV4dGVuZCh7XG4gICAgICBpOiBpLFxuICAgICAgZWw6IGVsXG4gICAgfSwgb3B0cyk7XG4gICAgbmV3IG5DYXJvdXNlbChvcHRzKTtcbiAgfSk7XG59XG5cblxuXG4vKlxuIyMgbkNhcm91c2VsXG4qL1xuXG5mdW5jdGlvbiBuQ2Fyb3VzZWwoIG9wdHMgKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5vcHRzID0gJC5leHRlbmQoe1xuICAgIGR1cmF0aW9uOiA0MDAsXG4gICAgZWFzaW5nOiAnc3dpbmcnLFxuICAgIHN1cnBsdXM6IDEsXG4gICAgaW50ZXJ2YWw6IDBcbiAgfSwgb3B0cyk7XG4gIFxuICB0aGlzLmJhY2t1cCA9IHt9O1xuICB0aGlzLmxvY2sgPSBmYWxzZTtcbiAgdGhpcy5hY3RpdmVSZXNwb25zaXZlID0gZmFsc2U7XG4gIFxuICB0aGlzLiR3aW5kb3cgPSAkKHdpbmRvdyk7XG4gIHRoaXMuJGVsID0gJChvcHRzLmVsKTtcbiAgdGhpcy5iYWNrdXAuaHRtbCA9IHRoaXMuJGVsLmh0bWwoKTtcbiAgdGhpcy4kZWwuZW1wdHkoKTtcbiAgXG4gIHRoaXMuJHBhcmVudCA9IHRoaXMuJGVsLnBhcmVudCgpO1xuICBcbiAgdGhpcy4kZWxcbiAgICAub24oJ2NsaWNrJywgJy5uQ2Fyb3VzZWxfX3ByZXYnLCBmdW5jdGlvbigpe1xuICAgICAgc2VsZi5hbmltYXRpb24oIHNlbGYuY3VycmVudCAtIDEgKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KVxuICAgIC5vbignY2xpY2snLCAnLm5DYXJvdXNlbF9fbmV4dCcsIGZ1bmN0aW9uKCl7XG4gICAgICBzZWxmLmFuaW1hdGlvbiggc2VsZi5jdXJyZW50ICsgMSApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICBcbiAgdGhpcy5tYXhXaWR0aCA9IHBhcnNlSW50KCB0aGlzLiRlbC5jc3MoJ21heC13aWR0aCcpICk7XG4gIC8vY29uc29sZS5sb2coJ21heFdpZHRoJywgdGhpcy5tYXhXaWR0aCk7XG4gIFxuICB0aGlzLmluaXQoKTtcbiAgXG4gIC8vcmVzaXplXG4gIHRoaXMud2luZG93UmVzaXplKCk7XG4gIHRoaXMucmVzaXplVGltZXIgPSBmYWxzZTtcbiAgdGhpcy4kd2luZG93LnJlc2l6ZShmdW5jdGlvbigpe1xuICAgIGlmKCBzZWxmLnJlc2l6ZVRpbWVyICE9PSBmYWxzZSApIHtcbiAgICAgIGNsZWFyVGltZW91dChzZWxmLnJlc2l6ZVRpbWVyKTtcbiAgICB9XG4gICAgc2VsZi5yZXNpemVUaW1lciA9IHNldFRpbWVvdXQoJC5wcm94eShzZWxmLndpbmRvd1Jlc2l6ZSwgc2VsZiksIDEwMCk7XG4gIH0pO1xuICBcbiAgLy9hdXRvcGxheVxuICBpZiggMCA8IHRoaXMub3B0cy5pbnRlcnZhbCApIHtcbiAgICB0aGlzLnRpY2tlciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7XG4gICAgICBzZWxmLmFuaW1hdGlvbiggc2VsZi5jdXJyZW50ICsgMSApO1xuICAgIH0sIHRoaXMub3B0cy5pbnRlcnZhbCk7XG4gIH1cbn1cblxuXG5cbi8qXG4jIyMgd2luZG93IHJlc2l6ZVxuKi9cblxubkNhcm91c2VsLnByb3RvdHlwZS53aW5kb3dSZXNpemUgPSBmdW5jdGlvbigpe1xuICB0aGlzLndpbmRvd1dpZHRoID0gdGhpcy4kd2luZG93LndpZHRoKCk7XG4gIGlmKCB0aGlzLm1heFdpZHRoIDwgdGhpcy4kd2luZG93LndpZHRoKCkgKXtcbiAgICBpZiggdGhpcy5hY3RpdmVSZXNwb25zaXZlICkge1xuICAgICAgY29uc29sZS5sb2coJ+ODrOOCueODneODs+OCt+ODluOCkuino+mZpCcpO1xuICAgICAgdGhpcy5hY3RpdmVSZXNwb25zaXZlID0gZmFsc2U7XG4gICAgICB0aGlzLnJlc2V0SXRlbVdpZHRoKCdhdXRvJyk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHRoaXMuYWN0aXZlUmVzcG9uc2l2ZSA9IHRydWU7XG4gIGNvbnNvbGUubG9nKCfjg6zjgrnjg53jg7Pjgrfjg5bjgpLpgannlKgnKTtcbiAgdGhpcy5yZXNldEl0ZW1XaWR0aCggdGhpcy4kcGFyZW50LndpZHRoKCkgKTtcbn1cblxuXG5cbi8qXG4jIyMgcmVzZXRJdGVtV2lkdGhcbiovXG5cbm5DYXJvdXNlbC5wcm90b3R5cGUucmVzZXRJdGVtV2lkdGggPSBmdW5jdGlvbiggd2lkdGggKXtcbiAgdGhpcy4kX2l0ZW0ud2lkdGgod2lkdGgpO1xuICB0aGlzLml0ZW1XaWR0aCA9IHRoaXMuJGl0ZW0ub3V0ZXJXaWR0aCh0cnVlKTtcbiAgdGhpcy5pdGVtc1dpZHRoID0gdGhpcy5pdGVtV2lkdGggKiB0aGlzLiRpdGVtLmxlbmd0aDtcbiAgXG4gIHRoaXMuJGl0ZW1zXG4gICAgLmNzcyh7XG4gICAgICBtYXJnaW5MZWZ0OiAodGhpcy5vcHRzLnN1cnBsdXMgKiAtMSAqIHRoaXMuaXRlbVdpZHRoICogdGhpcy5jdXJyZW50KSArIHRoaXMubWFyZ2luQ29ycmVjdCxcbiAgICAgIHdpZHRoOiAodGhpcy5vcHRzLnN1cnBsdXMgKiAyICsgMSkgKiB0aGlzLml0ZW1zV2lkdGhcbiAgICB9KTtcbn1cblxuXG5cbi8qXG4jIyMgaW5pdFxuKi9cblxubkNhcm91c2VsLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKXtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB0aGlzLiRlbC5hZGRDbGFzcygnbkNhcm91c2VsJyk7XG4gIHRoaXMuJGVsLmh0bWwoXG4gICAgJzxkaXYgY2xhc3M9XCJuQ2Fyb3VzZWxfX3ZpZXdwb3J0XCI+J1xuICAgICsgJzxkaXYgY2xhc3M9XCJuQ2Fyb3VzZWxfX2l0ZW1zXCI+J1xuICAgICsgdGhpcy5iYWNrdXAuaHRtbFxuICAgICsgJzwvZGl2PidcbiAgICArICc8L2Rpdj4nXG4gICk7XG4gIFxuICB0aGlzLiR2aWV3cG9ydCA9IHRoaXMuJGVsLmNoaWxkcmVuKCcubkNhcm91c2VsX192aWV3cG9ydCcpO1xuICB0aGlzLiRpdGVtcyA9IHRoaXMuJHZpZXdwb3J0LmNoaWxkcmVuKCcubkNhcm91c2VsX19pdGVtcycpO1xuICB0aGlzLiRpdGVtID0gdGhpcy4kaXRlbXMuY2hpbGRyZW4oKTtcbiAgdGhpcy4kaXRlbS5hZGRDbGFzcygnbkNhcm91c2VsX19pdGVtJyk7XG4gIFxuICB0aGlzLml0ZW1XaWR0aCA9IHRoaXMuJGl0ZW0ub3V0ZXJXaWR0aCh0cnVlKTtcbiAgdGhpcy5pdGVtc1dpZHRoID0gdGhpcy5pdGVtV2lkdGggKiB0aGlzLiRpdGVtLmxlbmd0aDtcbiAgXG4gIHRoaXMubWFyZ2luQ29ycmVjdCA9IHBhcnNlSW50KCB0aGlzLiRpdGVtLmNzcygnbWFyZ2luLWxlZnQnKSApICogLTE7XG4gIFxuICB0aGlzLiRpdGVtc1xuICAgIC5jc3Moe1xuICAgICAgbWFyZ2luTGVmdDogKHRoaXMub3B0cy5zdXJwbHVzICogLTEgKiB0aGlzLml0ZW1zV2lkdGgpICsgdGhpcy5tYXJnaW5Db3JyZWN0LFxuICAgICAgd2lkdGg6ICh0aGlzLm9wdHMuc3VycGx1cyAqIDIgKyAxKSAqIHRoaXMuaXRlbXNXaWR0aFxuICAgIH0pO1xuICBcbiAgZm9yKCB2YXIgaT0wOyBpIDwgdGhpcy5vcHRzLnN1cnBsdXMgKiAyOyBpKysgKXtcbiAgICB0aGlzLiRpdGVtcy5hcHBlbmQoIHRoaXMuJGl0ZW0uY2xvbmUoKSApO1xuICB9XG4gIHRoaXMuJF9pdGVtID0gdGhpcy4kaXRlbXMuY2hpbGRyZW4oKTtcbiAgXG4gIHRoaXMuY3VycmVudCA9IHRoaXMuJGl0ZW0ubGVuZ3RoICogdGhpcy5vcHRzLnN1cnBsdXM7XG4gIFxuICAvL2Fycm93c1xuICB0aGlzLiR2aWV3cG9ydC5hcHBlbmQoXG4gICAgJzxkaXYgY2xhc3M9XCJuQ2Fyb3VzZWxfX2Fycm93IG5DYXJvdXNlbF9fcHJldlwiPjwvZGl2PicgKyBcbiAgICAnPGRpdiBjbGFzcz1cIm5DYXJvdXNlbF9fYXJyb3cgbkNhcm91c2VsX19uZXh0XCI+PC9kaXY+J1xuICApO1xuICB0aGlzLiRwcmV2ID0gdGhpcy4kdmlld3BvcnQuY2hpbGRyZW4oJy5uQ2Fyb3VzZWxfX3ByZXYnKTtcbiAgdGhpcy4kbmV4dCA9IHRoaXMuJHZpZXdwb3J0LmNoaWxkcmVuKCcubkNhcm91c2VsX19uZXh0Jyk7XG4gIHRoaXMuYXJyb3dWaXNpYmlsaXRpZXMoKTtcbiAgXG4gIC8vYWRkIHBvaW50ZXJzXG4gIHZhciBwb2ludGVyc0hUTUwgPSAnPGRpdiBjbGFzcz1cIm5DYXJvdXNlbF9fcG9pbnRlcnNcIj4nO1xuICBmb3IoIHZhciBpPTA7IGk8dGhpcy4kaXRlbS5sZW5ndGg7IGkrKyApe1xuICAgIHBvaW50ZXJzSFRNTCArPSAnPGRpdiBjbGFzcz1cIm5DYXJvdXNlbF9fcG9pbnRlclwiPjwvZGl2PidcbiAgfVxuICBwb2ludGVyc0hUTUwgKz0gJzwvZGl2Pic7XG4gIFxuICB0aGlzLiRlbC5hcHBlbmQocG9pbnRlcnNIVE1MKTtcbiAgdGhpcy4kcG9pbnRlciA9IHRoaXMuJGVsLmZpbmQoJy5uQ2Fyb3VzZWxfX3BvaW50ZXInKTtcbiAgdGhpcy4kcG9pbnRlci5lcSgwKS5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XG4gIHRoaXMuJGVsLm9uKCdjbGljaycsICcubkNhcm91c2VsX19wb2ludGVyJywgZnVuY3Rpb24oZSl7XG4gICAgdmFyIGluZGV4ID0gc2VsZi4kcG9pbnRlci5pbmRleCh0aGlzKSxcbiAgICAgICAgbmV4dCAgPSBpbmRleCArIHNlbGYuJGl0ZW0ubGVuZ3RoICogc2VsZi5vcHRzLnN1cnBsdXM7XG4gICAgc2VsZi5hbmltYXRpb24oIG5leHQgKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0pO1xufVxuXG5cblxuLypcbiMjIyBhbmltYXRpb25cbiovXG5cbm5DYXJvdXNlbC5wcm90b3R5cGUuYW5pbWF0aW9uID0gZnVuY3Rpb24oIG5leHQgKXtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBpZiggdGhpcy5sb2NrICkgcmV0dXJuIGZhbHNlO1xuICBpZiggMCA9PT0gdGhpcy5vcHRzLnN1cnBsdXMgKSB7XG4gICAgaWYoIG5leHQgPCAwIHx8IHRoaXMuJGl0ZW0ubGVuZ3RoIC0gMSA8IG5leHQgKSByZXR1cm4gZmFsc2U7XG4gIH1cbiAgXG4gIHRoaXMubG9jayA9IHRydWU7XG4gIHRoaXMuY3VycmVudCA9IG5leHQ7XG4gIGlmKCBzZWxmLmN1cnJlbnQgPCBzZWxmLiRpdGVtLmxlbmd0aCAqIHNlbGYub3B0cy5zdXJwbHVzICkge1xuICAgIHNlbGYuY3VycmVudCArPSBzZWxmLiRpdGVtLmxlbmd0aDtcbiAgfSBlbHNlIGlmKCBzZWxmLmN1cnJlbnQgPj0gc2VsZi4kaXRlbS5sZW5ndGggKiAoc2VsZi5vcHRzLnN1cnBsdXMgKyAxKSApIHtcbiAgICBzZWxmLmN1cnJlbnQgLT0gc2VsZi4kaXRlbS5sZW5ndGg7XG4gIH1cbiAgXG4gIHNlbGYucG9pbnRlckFjdGl2ZSgpO1xuICBcbiAgdGhpcy4kaXRlbXMuc3RvcCh0cnVlLGZhbHNlKS5hbmltYXRlKHtcbiAgICAnbWFyZ2luTGVmdCc6IHNlbGYuaXRlbVdpZHRoICogbmV4dCAqIC0xICsgdGhpcy5tYXJnaW5Db3JyZWN0XG4gIH0sIHRoaXMub3B0cy5kdXJhdGlvbiwgdGhpcy5vcHRzLmVhc2luZywgZnVuY3Rpb24oKXtcbiAgICBzZWxmLiRpdGVtcy5jc3MoJ21hcmdpbkxlZnQnLCBzZWxmLml0ZW1XaWR0aCAqIHNlbGYuY3VycmVudCAqIC0xICsgc2VsZi5tYXJnaW5Db3JyZWN0KTtcbiAgICBzZWxmLmxvY2sgPSBmYWxzZTtcbiAgfSk7XG4gIFxuICB0aGlzLmFycm93VmlzaWJpbGl0aWVzKCk7XG59XG5cblxuXG4vKlxuIyMjIGFycm93IHZpc2liaWxpdGllc1xuKi9cblxubkNhcm91c2VsLnByb3RvdHlwZS5hcnJvd1Zpc2liaWxpdGllcyA9IGZ1bmN0aW9uKCl7XG4gIGlmKCAwID09PSB0aGlzLm9wdHMuc3VycGx1cyApIHtcbiAgICBpZiggMCA9PSB0aGlzLmN1cnJlbnQgKSB7XG4gICAgICB0aGlzLiRwcmV2LmNzcygnZGlzcGxheScsJ25vbmUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4kcHJldi5jc3MoJ2Rpc3BsYXknLCdibG9jaycpO1xuICAgIH1cbiAgICBpZiggdGhpcy5jdXJyZW50ID09IHRoaXMuJGl0ZW0ubGVuZ3RoIC0gMSApIHtcbiAgICAgIHRoaXMuJG5leHQuY3NzKCdkaXNwbGF5Jywnbm9uZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRuZXh0LmNzcygnZGlzcGxheScsJ2Jsb2NrJyk7XG4gICAgfVxuICB9XG59XG5cblxuXG4vKlxuIyMjIHBvaW50ZXIgYWN0aXZlXG4qL1xuXG5uQ2Fyb3VzZWwucHJvdG90eXBlLnBvaW50ZXJBY3RpdmUgPSBmdW5jdGlvbigpe1xuICB0aGlzLiRwb2ludGVyLmZpbHRlcignLmlzLWFjdGl2ZScpLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgdGhpcy4kcG9pbnRlci5lcSh0aGlzLmN1cnJlbnQgLSB0aGlzLiRpdGVtLmxlbmd0aCAqIHRoaXMub3B0cy5zdXJwbHVzKS5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XG59XG4iLCJ9KShqUXVlcnksIHRoaXMsIHRoaXMuZG9jdW1lbnQpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
